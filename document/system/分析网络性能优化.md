# 网络性能篇

## 1. 需要了解linux网络知识

网卡硬中断只处理最核心的网卡数据读取或发送，而协议栈中的大部分逻辑，都会放到软中断中处理。

### 1.1 网络配置
`ifconfig`和`ip`分别属于`net-tools`和`iproute2`，`iproute2`是`net-tools`的下一代。在`centos 7`以上的版本中，基本都会默认安装。

以网络接口`ens160`为例，查看它的配置和状态：
```shell
$ ip -s addr show dev ens160
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:0c:29:e0:f8:18 brd ff:ff:ff:ff:ff:ff
    inet 192.168.112.217/24 brd 192.168.112.255 scope global ens160
       valid_lft forever preferred_lft forever
    inet 192.168.112.110/32 scope global ens160
       valid_lft forever preferred_lft forever
    RX: bytes  packets  errors  dropped overrun mcast
    173857441482 641065111 0       5       0       45237
    TX: bytes  packets  errors  dropped carrier collsns
    301499020345 600667659 0       0       0       0
```

个别参数说明
* errors 表示发生错误的数据包数，比如效验错误、帧同步错误；
* overruns 表示超限数据包数，即网络`i/o`速度过快，导致`Ring Buffer`中的数据包来不及处理（队列满）而导致丢包；
* carrier 表示发生`carrirer`错误的数据包数，比如双工模式不匹配、物理电缆出现问题等；
* collisions 表示碰撞数据包数；

### 1.2 套接字信息